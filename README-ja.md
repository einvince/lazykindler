
<!-- ![cooltext400798739959192](https://user-images.githubusercontent.com/16133390/147348820-9db84863-9431-4e67-814c-f1e1ddde8372.png) -->

<img src="./header.svg" width="800" height="400" alt="Click to see the source">

# Lazy Kindler

＃ ✨ 特徴

- 🌈 書籍をインポートし、効率的に書籍リストを表示します。

- 💅 サイエンスフィクション小説や武術小説などのコレクションを作成できます。

- 🚀 多次元表示で、タイトル、著者、評価、コレクション、タグなどによる書籍リストを表示します。

- 🛡 任意のキーワード（タイトル、著者または出版社など）で書籍を検索できます。

- 📦 右クリックコンテキストメニューまたはプラットフォームが管理するすべての書籍をダウンロードしてダウンロードできます。

- 🛡 ブック読み取り機能。プラットフォームはブック読み取り機能をサポートしています。

- 📦 バックアップ機能。プラットフォームはデータベースに `sqlite3` を使用し、すべての書籍を指定されたディレクトリに保存するためバックアップが簡単です。

- 🎻 コンピューターと `kindle` を接続したときに自動的に強調表示されたノートをインポートします。

- 📣 Android デバイスの `静読天下apk`（Jing Du Tian Xia）から強調表示されたノートをインポートします。

- 🎺 強調表示されたノート、インポートされたノートに対して `二次的な強調表示` と `二次的な強調削除` をサポートします。

- 🥁 強調表示されたノートにコメントを追加できます。

- 🎻 強調表示されたメモ用のコレクションを作成し、カテゴリ別に管理できます。

- 🚀 Kindle Vocabulary Builder。プラットフォームは、Kindle Vocabulary Builder から書籍、単語、例文をインポートすることができます。

# サポートプラットフォーム

現在は「mac」プラットフォームにしか適応しておらず、「windows」プラットフォームでは不明なエラーが発生する可能性があります。

# サポートされている電子書籍形式

mobi および azw3。その他の種類の電子書籍は自動的にインポート中に無視されます。

# 解決した問題

数千冊もの電子書籍をインターネットからダウンロードした後、どうやって効率的に管理するのでしょうか？
<br />
様々な電子書籍の品質は大きく異なり、一部は普通の著者によって書かれたものであり、他の一部は世界的に有名な作家によって書かれたものです。また、SF、ロマンス、ファンタジーなど多様なジャンルが存在します。

<br />

何度も数千冊を含むディレクトリから本を探す必要がある場合は頭痛がすることでしょう。そのため、これらの電子書籍を適切に管理し、特定の好みに基づいて小さな範囲内で本を検索し、目的の本を素早く見つけて余分な時間を浪費しないようにすることが必要です。

<br />

`lazykindler` はこの目的で生まれました。

# 機能紹介

## 1. 書籍インポート

「ファイルアップロード」ボタンをクリックすると、「~/Download」、「~/ダウンロード」、「~/Desktop」、「~/デスクトップ」といったディレクトリ内でサポートされている電子書籍ファイルを再帰的にスキャンします。重複したファイルは再度アップロードされません。

<br />

現在、インポートには `mobi` と `azw3` のフォーマットのみがサポートされており、プラットフォームでは電子書籍の形式変換機能を提供していません。特定の形式の電子書籍を見つけることは簡単であり、通常このウェブサイトで見つけます：http://www.fast8.com。このサイトの利点は、多くの本が用意されており、ダウンロード時に複数の形式オプションが利用可能であることです。必要な形式で本をダウンロードするだけです。

## 2. 書籍メタデータ追加

評価、タグ、コレクション、著者、出版社やカバーなど書籍情報を修正することができます。ただし注意点としてこれら操作は実際には書籍ファイル自体を変更しないためデータベースへ記録が追加されます。

## 3. 書籍情報解析

電子書籍をインポートした後、「lazykindler」プラットフォームでは自動的にeBookからデータ抽出し表示・管理します。

## 4. コレクション

`Science Fiction Collection`、 `Fantasy Novel Collection`、 `Romance Novel Collection`などの本のコレクションを作成できます。お気に入りのコレクションに代表的なカバーを追加し、コレクションに評価やタグを付けることができます。各コレクションは図書館から選択された本を持つことができ、また評価やタグ、カバーも追加することができます。複数のコレクションがある場合は、将来的にこれらのコレクションから直接本を検索することができます。

## 5. 表示

異なる次元から本を表示するために、本に対して評価やタグを付けたり、「著者」や「出版社」を変更したりすることができます。 「評価」「タグ」「著者」「出版社」といったさまざまな次元から書籍を表示することが可能です。また、「書籍カバー」も変更可能です。

## 6. ダウンロード

プラットフォーム内の書籍は、「操作」セクションの「ダウンロード」ボタンをクリックしてダウンロードすることができます。ダウンロードされた書籍は、ユーザーのホームディレクトリ内の「Download」または「下载」フォルダに保存されます。「ホームページ」で「すべての書籍をダウンロードする」をクリックすると、すべての書籍がユーザーのホームディレクトリ内の「lazykindler」というディレクトリ下にある「Documents」または「文稿」フォルダにダウンロードされます。複数回「すべての書籍をダウンロードする」をクリックしても、既存の書籍が再度ダウンロードされることはありません。

## 7. 読み込み

プラットフォームでは基本的な読書機能が提供されています。現在、「reactjs」を使用して`mobi`および`azw3`形式で読むためのライブラリが見つかっていません。そのため、「Read Book」というボタンを初めてクリックした場合、この2つの形式は `epub` 形式に変換されます。変換に使用するツールは `/Applications/calibre.app/Contents/MacOS/ebook-convert` です。コンピューター上で正常に本読み取り機能を使用するには、 `calibre` をインストールする必要があります。変換は「Read Book」を初めてクリックしたときだけ必要であり、ページが一時的に応答しなくなることがあります。待ち時間は電子書籍のサイズによって異なりますが、通常は速いです。変換された書籍はメインプラットフォームの `backend/data` ディレクトリに保存されます。
<br />

## 8. 処理ワークフロー

`Books -> Library` ページに表示される書籍は、公式に保管されている書籍であり、新しくインポートされた書籍は `Books -> Temporary` ページに表示されます。（ページの場所以外では、バックエンドでの公式と一時的な本の違いはあまりありません。）

<br />

「Temporary」ブックがどのコレクションに追加された後、「Books -> Temporary」から「Books -> Library」へ移動します。これは、**正式に保管されている本と一時的にインポートされた本を区別するためです。正式に保管されている本はフィルタリングが行われ、不要なものが削除されカテゴリ分けられていますが、一時的にインポートした本は多様性を持っています。**

## 9. バックアップ

使用しているデータベースは `sqlite3` であり、 `backend/lazykindler.db` に保存しています。

<br />

プラットフォームを初めて起動する際、データベースファイルが自動的に作成および初期化されます。このファイルには書籍以外のすべてのデータ情報が含まれます。 インポートした書籍は `backend/data` ディレクトリにコピーされます。内部プラットフォームの操作を容易にするため、 `backend/data` ディレクトリ内の書籍名は書籍の `md5` 値が付加されています。

<br />

プラットフォーム内のすべての書籍とデータをバックアップするには、単純に `backend/lazykindler.db` および `backend/data` を保存してください。次回別の場所でサービスを開始する場合は、「 backend / lazykindler.db」および「 backend / data」を対応する位置にコピーします。

## 10. Kindleハイライトインポート

この機能は現在Macプラットフォームでしかサポートされていません。

<br />

プラットフォームは自動的にKindleが接続されているかどうかを検出します。 Kindleがコンピューターに接続されると、プラットフォームは統一管理および多次元表示用にKindleから「My Clippings.txt」ファイルをインポートします。「Kindle」 の 「My Clippings.txt」 ファイルが変更された場合、プラットフォームでは新しく追加された内容だけが自動的にインポートされます。古いデータは重複してインポートされません。ユーザーは、コンピュータにKindleを接続した後、ページを更新することで新しく追加された内容を確認できます。

<br />

ただし、「Kindle」 は、複数の段落の内容でも改行なしのテキストチャンクにユーザーが追加した強調表示メモを処理します。「lazykindler」 は、「Kindle」 の 「My Clippings.txt」 ファイルをインポートする際に改行を巧みに認識および処理します。

<img src="https://user-images.githubusercontent.com/16133390/210229975-4e7145e7-5d91-4aff-85ff-f5550fd7fe2c.png" width="66%">

## 11. ハイライトされたノートに二次的なハイライトを行う

ハイライトされたノートは、本を読む際に文や関連する段落の一部を強調表示して記録するものであり、しばしばその中の文章や単語が私たちにとって特別な影響を与えるからです。ハイライトされたメモをプラットフォームにインポートした後、その後の整理作業中に当時共感した文章や単語を強調表示し、共感したテキストの小さなセクションを簡単に強調表示して表示する必要があります。

<br />

`lazykindler` を使用すれば、簡単に二次的なハイライトができます。該当するテキストを選択し、「OK」をクリックします。

<img src="https://user-images.githubusercontent.com/16133390/210230077-c9a4532b-aafc-4ba2-a163-cd151c98d831.png" width="66%">

## 12. ハイライトされた注釈へコメント追加

自分自身と共有する目的で、あるいは将来参照することができるように、テキスト内で共感した箇所について考えたことや思ったことなどを記録することができます。

<img width="1379" alt="Xnip2023-02-05_15-19-18" src="https://user-images.githubusercontent.com/16133390/216806787-4b76a541-608d-4e8e-9d8e-2651bf7842ef.png">

## 13. Jingdu Tianxia apkからハイライトをインポート

`Jingdu Tianxia apk`は、Androidプラットフォーム上の人気のあるリーダーです。私は現在、このソフトウェアを使用してHisense e-readerで本を読んでおり、このソフトウェアもハイライトされたメモの追加に対応しています。そのため、このソフトウェアからエクスポートされたハイライトされたメモをインポートするサポートを追加しました。

<br />

`Jingdu Tianxia apk`からエクスポートされたハイライトされたメモファイルの形式は `.mrexpt` です。これらのファイルを `~/Download`, `~/下载`, `~/Desktop`, `~/桌面`など任意のディレクトリに配置すると、プラットフォームが自動的にインポート操作を完了します。

## 14. Kindle Vocabulary Builder をインポート

Vocabulary Builder は Kindle の機能であり、本を読みながら調べた単語やフレーズを記録します。この方法は、英語のオリジナルの本を読んで単語を記録し、後でこれらの単語を学習や復習に使用することができます。プラットフォームはこれらの語彙をインポートすることができます。

これらの語彙をインポートした上で、プラットフォームはこの情報を表示するために良好なインタフェースを提供し、手動で単語や例文を作成したり、例文に対して翻訳を追加したりすることができます。

<img width="1322" alt="Xnip2023-03-31_23-23-41" src="https://user-images.githubusercontent.com/16133390/229163528-952ee43f-bf31-43a7-b39b-98d637e584da.png">
<img width="1320" alt="Xnip2023-03-31_23-23-57" src="https://user-images.githubusercontent.com/16133390/229163550-8c321a41-7df4-41af-9bd0-fd765e113a1f.png">

# システム要件

`python 3.10.4`

`nodejs v19.6.0`

`Calibre`

他のバージョンは未検証です。

# サービスの開始

## 依存関係のインストール

1.`backend`ディレクトリで実行してください。

```

pip3 install -r requirements.txt

```

2.`chatgpt`機能を使用する必要がある場合は、 `backend/config.ini`で `chatgpt`キーを設定してください。OpenAi公式ウェブサイト上でキーを生成するアドレスは、 `https://platform.openai.com/account/api-keys`.

3.`frontend`ディレクトリで実行してください。

```

yarn install

```

## サービスの開始

```

./start.sh

```

その後、ブラウザで http://localhost:8000 を訪問してください。

## サービスの停止

```

./stop.sh

```

## 注意事項

このプラットフォームは個人向けに設計されており、ログインや登録などの機能はありません。

# プラットフォームショーケース

以下は、書籍をアップロードしコレクションを構成した後にローカルセットアップしたもののスクリーンショットです。

<img width="1418" alt="1" src="https://user-images.githubusercontent.com/16133390/216806475-97ee4960-40cc-4649-b414-0687724bb6ad.png">
<br />
<img width="1398" alt="Xnip2023-02-05_15-13-49" src="https://user-images.githubusercontent.com/16133390/216806612-dc1baf4f-7ed5-4b3d-ab44-73c7f07c73a7.png">
<br />
<img width="1418" alt="2" src="https://user-images.githubusercontent.com/16133390/216806480-def76f45-f8ba-41fc-9512-a448e9fbce32.png">
<br />
<img width="1418" alt="3" src="https://user-images.githubusercontent.com/16133390/216806485-caf74fe2-0cef-45f8-9a29-47780e72132d.png">
<br />
<img width="1799" alt="Xnip2023-02-14_12-36-20" src="https://user-images.githubusercontent.com/16133390/218640667-ba74048a-3b78-41c6-a772-dc1e56485b56.png">

<br />
<img width="1801" alt="Xnip2023-02-14_12-36-38" src="https://user-images.githubusercontent.com/16133390/218640680-263195c2-7ac3-4947-b7a5-b70375074e9c.png">

<br />

＃その他

`Kindle`の最も有名なツールはおそらく `calibre` であり、このソフトウェアの機能は「編集」により焦点が当てられており、電子書籍の多次元表示は比較的シンプルです。したがって、実用的なニーズを満たす電子書籍を管理するために特別に開発されたツールを作成する予定です。

現在、私は余暇時間にこのツールを開発しています。あなたも電子書籍を読むことが好きであり、電子書籍管理機能について提案がある場合は、遠慮なく問題を提起してください。

何か問題や機能要求がある場合は、著者までご連絡ください。メール：wupengcn301@gmail.com, WeChat：leowucn。ありがとうございました。
